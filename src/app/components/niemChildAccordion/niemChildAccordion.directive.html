<div class="niem-child-accordion">
  <div class="niem-child-accordion-heading">
    <img src="images/ic_carot.svg" class="carot-img float-left" ng-class="{'caret-down': isOpen}" ng-click="onClick()">
    <div class="niem-child-accordion-heading-text">
      <span class="child-heading-title">{{elementData.name}}</span>
      <span class="child-heading-type" ng-if="(!!elementDataElement.type.type || !!elementData.type.parentSimpleType || !!elementData.type.parentTypeName)">({{elementData.type.type || elementData.type.parentSimpleType || elementData.type.parentTypeName}})</span>
    </div>
  </div>
  <div class="niem-accordion-list" ng-show="isOpen">
    <div ng-if="entityType === 'Element'">
      <div ng-repeat="currElement in elementData.type.elements" ng-if="nextLevel < 3">
        <div class="niem-accordion-item" ng-if="!currElement.type.elements">
          <span class="item-name">{{currElement.name}}</span>
          <span class="item-type" ng-if="!!currElement.type.type || !!currElement.type.parentSimpleType || !!currElement.type.parentTypeName">({{currElement.type.type || currElement.type.parentSimpleType || currElement.type.parentTypeName}})</span>
          <span class="item-type" ng-if="!(!!currElement.type.type || !!currElement.type.parentSimpleType || !!currElement.type.parentTypeName)">({{currElement.type}})</span>

        </div>
        <div ng-if="!!currElement.type.elements">
          <niem-child-accordion tree-level="nextLevel" element-data="elementData.type.elements[$index]" click-handler="clickHandler" entity-type="entityType"></niem-child-accordion>
        </div>
      </div>

      <div ng-if="nextLevel >= 3">
        <div class="niem-accordion-item" ng-if="!elementData.type.elements[0].type.elements">
          <span class="item-name">{{elementData.type.elements[0].name}}</span>
          <span class="item-type" ng-if="!!elementData.type.elements[0].type.type || !!elementData.type.elements[0].type.parentSimpleType || !!elementData.type.elements[0].type.parentTypeName">({{elementData.type.elements[0].type.type || elementData.type.elements[0].type.parentSimpleType || elementData.type.elements[0].type.parentTypeName}})</span>
          <span class="item-type" ng-if="!(!!elementData.type.elements[0].type.type || !!elementData.type.elements[0].type.parentSimpleType || !!elementData.type.elements[0].type.parentTypeName)">({{elementData.type.elements[0].type}})</span>
        </div>
        <div ng-if="!!elementData.type.elements[0].type.elements">
          <niem-child-accordion tree-level="nextLevel" element-data="elementData.type.elements[0].type.elements[$index]" click-handler="clickHandler" entity-type="entityType"></niem-child-accordion>
        </div>
        <div class="niem-accordion-item text-uppercase text-right" ng-click="showMore()" ng-if="elementData.type.elements.length > 1">
          Show additional elements in "{{elementData.name}}"
        </div>
        <div ng-show="seeMore">
          <div ng-repeat="currElement in elementData.type.elements">
            <div ng-if="$index > 0">
              <div class="niem-accordion-item" ng-if="!currElement.type.elements">
                <span class="item-name">{{currElement.name}}</span>
                <span class="item-type" ng-if="!!currElement.type.type || !!currElement.type.parentSimpleType || !!currElement.type.parentTypeName">({{currElement.type.type || currElement.type.parentSimpleType || currElement.type.parentTypeName}})</span>
                <span class="item-type" ng-if="!(!!currElement.type.type || !!currElement.type.parentSimpleType || !!currElement.type.parentTypeName)">({{currElement.type}})</span>

              </div>
              <div ng-if="!!currElement.type.elements">
                <niem-child-accordion tree-level="nextLevel" element-data="elementData.type.elements[$index]" click-handler="clickHandler" entity-type="entityType"></niem-child-accordion>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div ng-repeat="currElement in elementData.type.elements" ng-if="entityType === 'Type'">
      <div class="niem-accordion-item" ng-if="!currElement.type.elements">
        <span class="item-name">{{currElement.element}}</span>
        <span class="item-type" ng-if="!!currElement.type.type || !!currElement.type.parentSimpleType || !!currElement.type.parentTypeName">({{currElement.type.type || currElement.type.parentSimpleType || currElement.type.parentTypeName}})</span>
        <span class="item-type" ng-if="!(!!currElement.type.type || !!currElement.type.parentSimpleType || !!currElement.type.parentTypeName)">({{currElement.type}})</span>
      </div>

      <div ng-if="!!currElement.type.elements">
        <niem-child-accordion tree-level="nextLevel" element-data="elementData.type.elements[$index]" click-handler="clickHandler" entity-type="entityType"></niem-child-accordion>
      </div>
    </div>

  </div>
</div>
